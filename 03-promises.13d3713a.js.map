{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAASC,SAASC,cAAc,SAEtCF,EAAOG,iBAAiB,UAaxB,SAA0BC,GACxBA,EAAEC,iBAEF,IAAIC,EAAYC,KAAKC,MAErBC,EAAUC,YAAW,KACnBC,GAAe,EACfC,EAAaL,KAAKC,MAAQF,EAC1BO,IACAC,aAAaL,GAEbM,EAAaC,aAAY,KACvBL,GAAe,EACXA,GAAeM,EAAKC,QACtBC,cAAcJ,GAGhBH,EAAaL,KAAKC,MAAQF,EAE1BO,MACCI,EAAKG,QACPH,EAAKI,OAERjB,EAAEkB,cAAcC,WAnClBvB,EAAOG,iBAAiB,SAQxB,SAAuBC,GACrBa,EAAKb,EAAEoB,OAAOC,MAAQC,OAAOtB,EAAEoB,OAAOG,UAPxC,IAAIlB,EAAU,KACVM,EAAa,KACbJ,EAAc,KACdC,EAAa,KACbK,EAAO,GAgCX,SAASJ,EAAce,EAAUP,GAC/BQ,QAAQC,IAAI,wBAAyBT,GACrCQ,QAAQC,IAAIb,GACUc,KAAKC,SAAW,GAStClC,EAAAmC,OAAOC,QAAQ,sBAAsBvB,QAAkBC,QAIvDd,EAAAmC,OAAOE,QAAQ,oBAAoBxB,QAAkBC","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst formEl = document.querySelector('.form');\n\nformEl.addEventListener('submit', onSubmitBtnClick);\nformEl.addEventListener('input', onInputChange);\n\nlet timerId = null;\nlet intervalId = null;\nlet totalAmount = null;\nlet passedTime = null;\nlet data = {};\n\nfunction onInputChange(e) {\n  data[e.target.name] = Number(e.target.value);\n}\n\nfunction onSubmitBtnClick(e) {\n  e.preventDefault();\n\n  let dataStart = Date.now();\n\n  timerId = setTimeout(() => {\n    totalAmount += 1;\n    passedTime = Date.now() - dataStart;\n    createPromise();\n    clearTimeout(timerId);\n\n    intervalId = setInterval(() => {\n      totalAmount += 1;\n      if (totalAmount >= data.amount) {\n        clearInterval(intervalId);\n      }\n\n      passedTime = Date.now() - dataStart;\n\n      createPromise();\n    }, data.step);\n  }, data.delay);\n\n  e.currentTarget.reset();\n}\n\nfunction createPromise(position, delay) {\n  console.log('createPromise : delay', delay);\n  console.log(data);\n  const shouldResolve = Math.random() > 0.3;\n  if (shouldResolve) {\n    notiFySucces();\n  } else {\n    notiFyFailure();\n  }\n}\n\nfunction notiFySucces() {\n  Notify.success(`Fullfilled promise ${totalAmount} in ${passedTime} ms`);\n}\n\nfunction notiFyFailure() {\n  Notify.failure(`Rejected promise ${totalAmount} in ${passedTime} ms`);\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$formEl","document","querySelector","addEventListener","e","preventDefault","dataStart","Date","now","$47d4ff9957288465$var$timerId","setTimeout","$47d4ff9957288465$var$totalAmount","$47d4ff9957288465$var$passedTime","$47d4ff9957288465$var$createPromise","clearTimeout","$47d4ff9957288465$var$intervalId","setInterval","$47d4ff9957288465$var$data","amount","clearInterval","step","delay","currentTarget","reset","target","name","Number","value","position","console","log","Math","random","Notify","success","failure"],"version":3,"file":"03-promises.13d3713a.js.map"}